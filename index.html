<html>
<head>
	<title>Connect 3 Test</title>
	<!-- Import EaselJS Framework -->
	<script src="lib/easel.js"></script>

	<!-- End EaselJS Imports -->

<script>

// Gem object
function Gem() {
	this.initialize();
}

Gem.prototype = new Container();
Gem.prototype.position = [null,null];
Gem.prototype.color = 0;





var canvas;
var stage;
var container;
var captureContainers;
var captureIndex;

// colors.
var colors = new Array();
colors[1] = '#D9CEB2';
colors[2] = '#D5DED9';
colors[3] = '#7A6A53';
colors[4] = '#99B2B7';
colors[5] = '#948C75';



// numbers represent the color of the circles.
var matrix = {
	'0' : [2,3,3,2,3,2,2,3,1,3,2,3,4],
	'1' : [2,3,2,2,3,1,5,3,1,3,2,3,4],
	'2' : [1,3,2,2,3,2,2,3,1,5,2,3,5],
	'3' : [2,3,2,2,4,2,2,5,2,3,2,2,4],
	'4' : [2,3,2,2,3,2,2,3,2,3,4,3,4],
	'5' : [2,3,1,2,5,2,2,3,1,3,2,3,5],
	'6' : [2,3,2,2,5,2,2,2,4,3,1,3,4],
	'7' : [2,3,2,2,5,2,2,3,3,3,2,3,5],
};
// Size of the grid, starting from 0. So it's total - 1
var size = {x: 12, y: 7}; 

var ballArea = 40;
var offsetX = 70;
var offsetY = 80;



//console.log(matrix[0][0]);

function init() {
	canvas = document.getElementById("testCanvas");
	stage = new Stage(canvas);
	
	var w = canvas.width;
	var h = canvas.height;
	
	container = new Container();
	stage.addChild(container);
	
	//if (Touch.isSupported()) { Touch.enable(stage); }
	stage.enableMouseOver(100);
	
	captureContainers = [];
	captureIndex = 0;

	var text = new Text("Connect 3 Game Test");
	text.font = "bold 16px Arial";
	text.color = "#CCC";
	text.x = 12;
	text.y = 24;
	stage.addChild(text);

	var gem = new Gem();
	console.log(gem.color);

	for (var i = 0; i <= size.y; i++) {
		for (var j = 0; j <= size.x; j++) {

			var gem = new Shape();
			//console.log(i + ' / ' + j );
			gem.graphics.setStrokeStyle(1, "round", "round");
			gem.graphics.beginStroke("#444");
			gem.graphics.beginFill(colors[matrix[i][j]]).drawCircle(0, 0, 15);
			gem.y = i*ballArea + offsetY;
			gem.x = j*ballArea + offsetX;
							
			container.addChild(gem);
			(function() {
				gem.onMouseOver = function(e) {
					this.scaleX = this.scaleY = this.scaleY*1.2;
				}
				gem.onMouseOut = function(e) {
					this.scaleX = this.scaleY = 1;
				}
			})(gem);
		}

	}
	Ticker.addListener(window);
	
}



function tick() {
	var w = canvas.width;
	var h = canvas.height;
	var l = container.getNumChildren();

	stage.update();
}


</script>

</head>
<body onload="init();">
	<div class="canvasHolder">
		<canvas id="testCanvas" width="620" height="410" style="background-color:#FFF; margin: 0 auto; display: block;"></canvas>
	</div>
	

</body>
</html>